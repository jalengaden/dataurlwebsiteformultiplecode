<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Multi-Game Data URL Generator</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      max-width: 700px;
      margin: 40px auto;
      background: #f9f9f9;
      padding: 20px;
      border-radius: 6px;
      box-shadow: 0 0 15px rgba(0,0,0,0.1);
    }
    textarea {
      width: 100%;
      height: 180px;
      font-family: monospace;
      font-size: 14px;
      padding: 10px;
      border-radius: 4px;
      border: 1px solid #ccc;
      resize: vertical;
    }
    button {
      margin-top: 10px;
      padding: 10px 18px;
      font-size: 16px;
      background-color: #007bff;
      color: white;
      border: none;
      border-radius: 5px;
      cursor: pointer;
      transition: background-color 0.25s ease;
    }
    button:disabled {
      background-color: #aaa;
      cursor: not-allowed;
    }
    button:hover:not(:disabled) {
      background-color: #0056b3;
    }
    .output {
      margin-top: 20px;
      word-break: break-all;
      background: #eee;
      padding: 12px;
      border-radius: 5px;
      max-height: 150px;
      overflow-y: auto;
      font-size: 13px;
      font-family: monospace;
    }
    .preview-link {
      margin-top: 15px;
      display: inline-block;
      font-weight: bold;
      color: #007bff;
      text-decoration: none;
    }
    .preview-link:hover {
      text-decoration: underline;
    }
  </style>
</head>
<body>
  <h1>Multi-Game Data URL Generator</h1>
  <p><strong>Instructions:</strong> Paste your HTML game codes below, separated by <code>---GAME---</code> (three dashes + the word GAME + three dashes). Click "Generate Data URL" to create a multi-game website URL with tabs.</p>

  <textarea id="htmlCode" placeholder="Paste your games HTML here, separated by ---GAME---"></textarea>
  <br/>
  <button id="generateButton" onclick="generateDataUrl()">Generate Data URL</button>
  <button id="copyButton" onclick="copyToClipboard()" disabled>Copy Data URL</button>

  <div class="output" id="dataUrl" aria-live="polite" role="region"></div>
  <a id="previewLink" class="preview-link" href="#" target="_blank" rel="noopener" style="display:none;">Preview Your Multi-Game Site</a>

  <script>
    function generateDataUrl() {
      const rawInput = document.getElementById('htmlCode').value.trim();
      if (!rawInput) {
        alert('Please paste some HTML code for your games.');
        return;
      }
      
      // Split input into separate games by ---GAME--- separator
      const parts = rawInput.split(/---GAME---/i).map(p => p.trim()).filter(p => p.length > 0);
      if (parts.length === 0) {
        alert('No game code found. Use ---GAME--- to separate each game.');
        return;
      }

      // Build the multi-game HTML with tabs
      let tabsHtml = '';
      let contentHtml = '';

      parts.forEach((gameCode, i) => {
        const tabId = 'tab' + i;
        const checkedAttr = i === 0 ? 'checked' : '';
        tabsHtml += `
          <input type="radio" name="tabs" id="${tabId}" ${checkedAttr}>
          <label for="${tabId}">Game ${i + 1}</label>
        `;
        contentHtml += `
          <section id="content${i}" class="tab-content">${gameCode}</section>
        `;
      });

      const finalHtml = `
        <!DOCTYPE html>
        <html lang="en">
        <head>
          <meta charset="UTF-8" />
          <meta name="viewport" content="width=device-width, initial-scale=1" />
          <title>Multi-Game Site</title>
          <style>
            body {
              font-family: Arial, sans-serif;
              margin: 0; padding: 20px; background: #f0f0f0;
            }
            /* Tabs styling */
            input[name="tabs"] {
              display: none;
            }
            label {
              padding: 10px 20px;
              margin-right: 5px;
              background: #ddd;
              cursor: pointer;
              border-radius: 5px 5px 0 0;
              user-select: none;
              transition: background 0.3s ease;
              font-weight: bold;
            }
            input[name="tabs"]:checked + label {
              background: #007bff;
              color: white;
            }
            .tab-content {
              display: none;
              padding: 15px;
              background: white;
              border-radius: 0 5px 5px 5px;
              box-shadow: 0 2px 5px rgb(0 0 0 / 0.1);
              min-height: 300px;
            }
            #tab0:checked ~ #content0,
            #tab1:checked ~ #content1,
            #tab2:checked ~ #content2,
            #tab3:checked ~ #content3,
            #tab4:checked ~ #content4,
            #tab5:checked ~ #content5,
            #tab6:checked ~ #content6,
            #tab7:checked ~ #content7,
            #tab8:checked ~ #content8,
            #tab9:checked ~ #content9 {
              display: block;
            }
          </style>
        </head>
        <body>
          <h1>Multi-Game Site</h1>
          <nav class="tabs">
            ${tabsHtml}
          </nav>
          ${contentHtml}
        </body>
        </html>
      `;

      const encoded = encodeURIComponent(finalHtml);
      const dataUrl = 'data:text/html;charset=utf-8,' + encoded;

      const dataUrlElem = document.getElementById('dataUrl');
      dataUrlElem.textContent = dataUrl;

      // Enable copy button
      const copyBtn = document.getElementById('copyButton');
      copyBtn.disabled = false;

      // Show preview link
      const previewLink = document.getElementById('previewLink');
      previewLink.href = dataUrl;
      previewLink.style.display = 'inline-block';
    }

    function copyToClipboard() {
      const dataUrl = document.getElementById('dataUrl').textContent;
      navigator.clipboard.writeText(dataUrl)
        .then(() => alert('Data URL copied to clipboard!'))
        .catch(err => alert('Failed to copy: ' + err));
    }
  </script>
</body>
</html>
